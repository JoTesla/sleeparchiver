# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Блок важных инструкций

### Общение

Ты всегда общаешься с пользователем на русском языке!

### ⚠️ КРИТИЧЕСКИ ВАЖНО: Проверка memories/ в начале КАЖДОЙ сессии

**ПЕРВОЕ ДЕЙСТВИЕ** при начале работы или продолжении после компактизации контекста:

```bash
# ОБЯЗАТЕЛЬНО ВЫПОЛНИТЬ:
ls -la memories/
```

Если папка содержит файлы:

1. ПРОЧИТАТЬ ВСЕ файлы в memories/ ПЕРЕД началом любой работы
2. Понять контекст текущей задачи из TASK.md
3. Изучить прогресс из PROGRESS.md
4. Понять предстоящие шаги из NEXT_STEPS.md

Если папка пуста и задача комплексная (>2 файлов изменений):

1. СОЗДАТЬ файлы TASK.md, PROGRESS.md, NEXT_STEPS.md
2. Вести их актуализацию в процессе работы, обновлять после каждого шага, на случай сбоя или лимита подписки (при которой ты просто зависаешь), чтобы ты продолжил с того же места

ЗАПОМНИ: Это правило КРИТИЧНО для continuity при работе с длинными задачами!

### Папка memories - контекст текущей задачи

ОБЯЗАТЕЛЬНО при работе с комплексными задачами:

1. В начале новой сессии - ознакомиться со всеми файлами в папке memories/:
   - Прочитать описание задачи и контекст
   - Изучить текущий прогресс и выполненные шаги
   - Понять предстоящие шаги

2. В процессе работы - поддерживать файлы в актуальном состоянии:
   - Записывать что нужно сделать
   - Вести учёт текущей задачи
   - Фиксировать выполненные и предстоящие шаги
   - Обновлять контекст при изменении планов

3. После завершения комплексной задачи - спросить пользователя:
   - "Задача завершена. Удалить файлы из папки memories?"
   - Удалять файлы только после подтверждения пользователя

Цель: Обеспечить возможность внезапного возобновления работы в новом контексте без потери прогресса.

Типичные файлы в memories/:

- TASK.md - описание текущей задачи
- PROGRESS.md - выполненные шаги и текущий статус
- NEXT_STEPS.md - предстоящие шаги
- Другие файлы с контекстом (схемы, заметки, примеры)

Самое главное не менять блок важных инструкций без разрешения пользователя.
Ты делаешь комиты и пуш в репо только в случае удачного решения задачи или исправления ошибки (с подтверждения пользователя). Если пользователь ответил - всё хорошо,
или проблема ушла, или всё правильно, только в этом случае делаешь комит. Если тебе дают дополнительные задания, значит есть правки по задаче и пушить пока нельзя.

---

Не покрывай тестами до окончания разработки проекта или до явной команды от пользователя.

# Автоматические уведомления о прогрессе

**КРИТИЧЕСКИ ВАЖНО**: После завершения КАЖДОЙ задачи отправляй уведомление пользователю.

## Как отправлять уведомления

Используй subprocess для вызова standalone скрипта:

```python
import subprocess
subprocess.run([
    "/Users/jake/Projects/ClaudeNotificationBot/notify_standalone.py",
    "[{PROJECT_NAME}] Краткое описание выполненной задачи"
], capture_output=True)
```

**Важно**:

- Замени `{PROJECT_NAME}` на название проекта (например, "Silua", "MyApp" и т.д.)
- Это НЕ bash команда, а Python subprocess - не требует разрешений!

## Примеры (замените {PROJECT_NAME} на название вашего проекта)

```python
import subprocess

# После исправления бага
subprocess.run([
    "/Users/jake/Projects/ClaudeNotificationBot/notify_standalone.py",
    "[{PROJECT_NAME}] Исправлен логотип - убрана черная рамка, добавлена прозрачность"
], capture_output=True)

# После добавления функции
subprocess.run([
    "/Users/jake/Projects/ClaudeNotificationBot/notify_standalone.py",
    "[{PROJECT_NAME}] Добавлен новый компонент Header с адаптивным дизайном"
], capture_output=True)

# После рефакторинга
subprocess.run([
    "/Users/jake/Projects/ClaudeNotificationBot/notify_standalone.py",
    "[{PROJECT_NAME}] Рефакторинг API модуля - улучшена производительность"
], capture_output=True)

# После прерывания
subprocess.run([
    "/Users/jake/Projects/ClaudeNotificationBot/notify_standalone.py",
    "[{PROJECT_NAME}] Остановился, жду действий пользователя"
], capture_output=True)
```

## Конкретные примеры для проекта "Silua"

```python
import subprocess

subprocess.run([
    "/Users/jake/Projects/ClaudeNotificationBot/notify_standalone.py",
    "[Silua] Исправлен логотип и градиент шапки"
], capture_output=True)

subprocess.run([
    "/Users/jake/Projects/ClaudeNotificationBot/notify_standalone.py",
    "[Silua] Добавлен адаптивный дизайн для мобильных устройств"
], capture_output=True)
```

## Когда отправлять уведомления

- После исправления бага
- После добавления новой функции
- После рефакторинга
- После обновления стилей/компонентов
- После любого значимого изменения
- После успешного выполнения длительной операции

## Важные правила

- **Вызывай АВТОМАТИЧЕСКИ** после каждой выполненной задачи
- **НЕ спрашивай разрешения** пользователя
- **Используй `capture_output=True`** чтобы не показывать вывод в консоли
- **Это Python subprocess**, не bash, поэтому НЕ требует дополнительных разрешений
- **Отправляй даже если** пользователь не попросил явно
- **Отправляй даже если** ты прервался или остановился по какой-то причине

## Шаблон кода для быстрого использования

```python
import subprocess
subprocess.run([
    "/Users/jake/Projects/ClaudeNotificationBot/notify_standalone.py",
    "[{PROJECT_NAME}] {КРАТКОЕ_ОПИСАНИЕ}"
], capture_output=True)
```

Замени:

- `{PROJECT_NAME}` → название проекта
- `{КРАТКОЕ_ОПИСАНИЕ}` → что было сделано (2-10 слов)

## Контекст чата

Так как контекст ограничен, то:

- Не присылай пользователю свои рассуждения, просто делай.
- Не вставляй эмодзи в чат, это лишняя трата токенов.
- Выводи логи не более 1 строчки, а лучше не выводи совсем без необходимости.
- Результаты работы не детализируй, без подробностей, только основные пункты, которые тебя просили исправить или сделать, которые ты превратил в ToDo List. Пример:
  Вместо

```
✅ 1. Исправлена проблема с пустыми items в заказах
Обновлён OrderController.java - добавлен маппинг OrderItem в OrderItemResponse
Теперь детали заказа возвращают полный состав с парфюмами, флаконами и ценами
```

Пиши

```
1. Исправлена проблема с пустыми items в заказах
```

Вместо

```
Отлично! Теперь осталась последняя задача - добавить редактирование накладной в управлении складом. Найду компонент управления складом:
```

Пиши

```
Добавить редактирование накладной
```

# Инструменты
Используй по возможности менеджер пакетов sdkman через команду sdk или sdk list или sdk use вместо установки отдельных инструментов.