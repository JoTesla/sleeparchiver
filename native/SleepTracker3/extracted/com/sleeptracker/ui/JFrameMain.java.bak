/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.sleeptracker.ui;

import com.sleeptracker.App;
import com.sleeptracker.entities.SleepRecord;
import com.sleeptracker.entities.UserAccount;
import com.sleeptracker.utils.ImportDatabase;
import com.sleeptracker.utils.Watch;
import com.sleeptracker.utils.WebSend;
import com.sun.awt.AWTUtilities;
import java.awt.*;
import java.awt.geom.RoundRectangle2D;
import java.io.IOException;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.prefs.BackingStoreException;
import java.util.prefs.Preferences;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.SwingWorker;

/**
 *
 * @author mbaker
 */
public class JFrameMain extends JFrame {
    private static final long serialVersionUID = 1L;
    JDialogSetup jDialogSetup;
    Watch watch;
    Point initialClick = new Point();
    final JFrame dialog = this;
    String oldDeviceName = "";
    String currentName = "";
    
    /**
     * Creates new form JFrameMain
     */
    public JFrameMain() {
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        
        initComponents();
        
        Logger log = App.getLogger();

        String os = System.getProperty("os.name").toLowerCase();
        log.log(Level.INFO, "Found OS: {0}", os);
        String arch = System.getProperty("os.arch").toLowerCase();
        log.log(Level.INFO, "Found Arch: {0}", arch);
        
        Calendar cal = GregorianCalendar.getInstance();
        cal.add(Calendar.DAY_OF_MONTH, -1);
        datePickerData.getMonthView().setUpperBound(cal.getTime());
        datePickerData.setDate(cal.getTime());
        datePickerData.setLinkDay(cal.getTime(), App.getText("JFrameMain.lastNight") + " {0}");
    }

    
    public boolean readWatch() {
        lblStatus.setText(App.getText("JFrameMain.loading") + "...");
        lblUploadNow.setText("");
        btnSync.setEnabled(false);
        btnNo.setEnabled(false);
        try {
            App.getLogger().info("Attempting to access watch.");
            watch = new Watch();
        } catch (Exception e) {
            App.getLogger().info("Driver failed or did not detect watch.");

            btnSync.setEnabled(true);
            btnSync.setText(App.getText("JFrameMain.btnSyncRefresh"));
            btnNo.setEnabled(true);
            btnNo.setText(App.getText("JFrameMain.btnNoHelp"));
            lblStatus.setText(App.getText("JFrameMain.cantFindWatch"));
            lblUploadNow.setText(App.getText("JFrameMain.clickRefresh"));
            
            if (watch != null) {
                watch.close();
            }
            return false;
        }

        if (!UserAccount.cleanComplete()) {
            UserAccount.cleanEmails();
        }

        String deviceName = watch.getSleepRecord().getDeviceName();
        oldDeviceName = deviceName;    
        
        boolean deviceNameWasBlank = false;
        
        // Battery replacement case
        if (deviceName == null || deviceName.equals("")) {
            deviceNameWasBlank = true;
            String[] options = new String[2];
            options[0] = "Create a new account";
            options[1] = "Register an existing account";
            int retval = JOptionPane.showOptionDialog(App.getMainFrame(), "A blank watch was detected, would you like to:", "Register Watch", JOptionPane.DEFAULT_OPTION, JOptionPane.QUESTION_MESSAGE, null, options, 1);
            if (retval == 1) {
                String tempEmail = JOptionPane.showInputDialog(App.getMainFrame(), App.getText("JFrameMain.blankEnterEmail"));
                if (tempEmail != null && !tempEmail.equals("")) {
                    int count = tempEmail.length();
                    if (count > 15) {
                        count = 15;
                    }
                    deviceName = tempEmail.substring(0,count);                                     
                }
            }
        }
        
        String email = UserAccount.getEmail(deviceName);

        
        if (email == null || email.equals("")) {
            boolean showSetup = false;
            
            // New computer case or second part to battery change case
            if (deviceName != null && !deviceName.equals("")) {
                java.util.List<String> data = WebSend.getAccountInfo(deviceName);
                if (data != null && data.size() == 3) {
                    email = data.get(0);
                    UserAccount.addEmail(email, deviceName, data.get(1), data.get(2));                    
                    try {
                        watch.saveDeviceName(deviceName);
                        watch.getSleepRecord().setDeviceName(deviceName);
                    }
                    catch (IOException e) {}         
                } else {
                    showSetup = true;
                }
            } else {
                showSetup = true;
            }

            if (showSetup) {
                jDialogSetup = new JDialogSetup(this, true, watch);
                jDialogSetup.setVisible(true);

                if (jDialogSetup.isConfirmed()) {
                    deviceName = watch.getSleepRecord().getDeviceName();
                } 
                else {
                    JOptionPane.showMessageDialog(this, App.getText("JFrameMain.error.accountFail"));
                    watch.close();
                    btnSync.setEnabled(true);
                    btnSync.setText(App.getText("JFrameMain.btnSyncRefresh"));
                    btnNo.setEnabled(true);
                    btnNo.setText(App.getText("JFrameMain.btnNoHelp"));
                    lblStatus.setText(App.getText("JFrameMain.cantFindWatch"));
                    lblUploadNow.setText(App.getText("JFrameMain.clickRefresh"));
                    return false;
                }
            }
        }
        else {
            if (!watch.getSleepRecord().getDeviceName().equals(deviceName)) {
                try {
                    watch.saveDeviceName(deviceName);
                    watch.getSleepRecord().setDeviceName(deviceName);
                }
                catch (IOException e) {}                
            }
        }

        watch.close();

        // If everything checks out, enable send data options        
        btnSync.setEnabled(true);
        btnSync.setText(App.getText("JFrameMain.btnSync"));
        btnNo.setEnabled(true);
        btnNo.setText(App.getText("General.Cancel"));
        currentName = UserAccount.getFirstName(deviceName) + " " + UserAccount.getLastName(deviceName);
        lblStatus.setText(App.getText("JFrameMain.lblStatus") + " " + currentName + "...");
        lblUploadNow.setText(App.getText("JFrameMain.lblUploadNow"));
        return true;
    }

    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblStatus = new javax.swing.JLabel();
        lblUploadNow = new javax.swing.JLabel();
        btnSync = new javax.swing.JButton();
        btnNo = new javax.swing.JButton();
        datePickerData = new org.jdesktop.swingx.JXDatePicker();
        btnCancel = new javax.swing.JButton();
        lblVersion = new javax.swing.JLabel();
        lblDataDate = new javax.swing.JLabel();
        btnReset = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBackground(new java.awt.Color(255, 255, 255));
        setBounds(new java.awt.Rectangle(100, 100, 410, 286));
        setName("JFrameMain");
        setResizable(false);
        setUndecorated(true);

        contentPanel.setBackground(new java.awt.Color(255, 255, 255));
        contentPanel.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(192, 215, 46), 4));
        contentPanel.setMaximumSize(new java.awt.Dimension(410, 286));
        contentPanel.setMinimumSize(new java.awt.Dimension(410, 286));
        contentPanel.setPreferredSize(new java.awt.Dimension(410, 286));
        contentPanel.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                contentPanelMousePressed(evt);
            }
        });
        contentPanel.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
            public void mouseDragged(java.awt.event.MouseEvent evt) {
                contentPanelMouseDragged(evt);
            }
        });

        lblStatus.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        lblStatus.setForeground(java.awt.Color.gray);
        lblStatus.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);

        lblUploadNow.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        lblUploadNow.setForeground(java.awt.Color.gray);
        lblUploadNow.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);

        btnSync.setBackground(new java.awt.Color(192, 215, 46));
        btnSync.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        btnSync.setForeground(java.awt.Color.white);
        java.util.ResourceBundle bundle = java.util.ResourceBundle.getBundle("com/sleeptracker/resources/resources"); // NOI18N
        btnSync.setText(bundle.getString("JFrameMain.btnSync")); // NOI18N
        btnSync.setBorder(null);
        btnSync.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSyncActionPerformed(evt);
            }
        });

        btnNo.setBackground(new java.awt.Color(192, 215, 46));
        btnNo.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        btnNo.setForeground(java.awt.Color.white);
        btnNo.setText(bundle.getString("General.Cancel")); // NOI18N
        btnNo.setBorder(null);
        btnNo.setEnabled(false);
        btnNo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNoActionPerformed(evt);
            }
        });

        datePickerData.setForeground(java.awt.Color.gray);
        datePickerData.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N

        btnCancel.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        btnCancel.setForeground(new java.awt.Color(192, 215, 46));
        btnCancel.setText("X");
        btnCancel.setBorder(null);
        btnCancel.setContentAreaFilled(false);
        btnCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelActionPerformed(evt);
            }
        });

        lblVersion.setFont(new java.awt.Font("Arial", 1, 10)); // NOI18N
        lblVersion.setForeground(new java.awt.Color(192, 215, 46));
        lblVersion.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblVersion.setText(App.getText("JFrameMain.lblVersion") + " " + App.getVersion());
        lblVersion.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                lblVersionMousePressed(evt);
            }
        });

        lblDataDate.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        lblDataDate.setForeground(java.awt.Color.gray);
        lblDataDate.setText(bundle.getString("JFrameMain.lblDataDate")); // NOI18N

        btnReset.setBackground(new java.awt.Color(192, 215, 46));
        btnReset.setFont(new java.awt.Font("Arial", 0, 10)); // NOI18N
        btnReset.setForeground(java.awt.Color.white);
        btnReset.setText(bundle.getString("General.Reset")); // NOI18N
        btnReset.setToolTipText("");
        btnReset.setBorder(null);
        btnReset.setContentAreaFilled(false);
        btnReset.setOpaque(true);
        btnReset.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                btnResetMousePressed(evt);
            }
        });
        btnReset.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnResetActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout contentPanelLayout = new javax.swing.GroupLayout(contentPanel);
        contentPanel.setLayout(contentPanelLayout);
        contentPanelLayout.setHorizontalGroup(
            contentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, contentPanelLayout.createSequentialGroup()
                .addGroup(contentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, contentPanelLayout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(contentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblStatus, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, contentPanelLayout.createSequentialGroup()
                                .addGap(0, 0, Short.MAX_VALUE)
                                .addComponent(btnCancel))
                            .addComponent(lblUploadNow, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, contentPanelLayout.createSequentialGroup()
                        .addGroup(contentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, contentPanelLayout.createSequentialGroup()
                                .addGap(74, 74, 74)
                                .addComponent(lblDataDate)
                                .addGap(18, 18, 18)
                                .addComponent(datePickerData, javax.swing.GroupLayout.PREFERRED_SIZE, 127, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, contentPanelLayout.createSequentialGroup()
                                .addGap(43, 43, 43)
                                .addComponent(btnSync, javax.swing.GroupLayout.PREFERRED_SIZE, 143, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(30, 30, 30)
                                .addComponent(btnNo, javax.swing.GroupLayout.PREFERRED_SIZE, 147, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, contentPanelLayout.createSequentialGroup()
                                .addGap(166, 166, 166)
                                .addComponent(lblVersion)))
                        .addGap(0, 29, Short.MAX_VALUE)))
                .addContainerGap())
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, contentPanelLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(btnReset, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
        contentPanelLayout.setVerticalGroup(
            contentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(contentPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(btnCancel)
                .addGap(34, 34, 34)
                .addComponent(lblStatus, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(lblUploadNow, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(contentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(datePickerData, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblDataDate))
                .addGap(18, 18, 18)
                .addGroup(contentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(btnSync, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(btnNo, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(contentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(contentPanelLayout.createSequentialGroup()
                        .addGap(30, 30, 30)
                        .addComponent(lblVersion)
                        .addContainerGap(24, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, contentPanelLayout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnReset, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))))
        );

        getContentPane().add(contentPanel, java.awt.BorderLayout.CENTER);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void contentPanelMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_contentPanelMousePressed
        initialClick = evt.getPoint();
        getComponentAt(initialClick);
    }//GEN-LAST:event_contentPanelMousePressed

    private void contentPanelMouseDragged(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_contentPanelMouseDragged
        // get location of Window
        int thisX = getLocation().x;
        int thisY = getLocation().y;

        // Determine how much the mouse moved since the initial click
        int xMoved = (thisX + evt.getX()) - (thisX + initialClick.x);
        int yMoved = (thisY + evt.getY()) - (thisY + initialClick.y);

        // Move window to this position
        int X = thisX + xMoved;
        int Y = thisY + yMoved;
        setLocation(X, Y);
    }//GEN-LAST:event_contentPanelMouseDragged

    private void btnCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelActionPerformed
        if (watch != null) {
            watch.close();
        }
        dispose();
    }//GEN-LAST:event_btnCancelActionPerformed

    private void lblVersionMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblVersionMousePressed
    }//GEN-LAST:event_lblVersionMousePressed

    private void btnNoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNoActionPerformed
        if (btnNo.getText().equals(("Help"))) {
            WebSend.openUrl("http://my.sleeptracker.com/help.php");
        } else {
            watch.close();
            dispose();
        }
    }//GEN-LAST:event_btnNoActionPerformed

    private void btnSyncActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSyncActionPerformed
        if (btnSync.getText().equals(App.getText("JFrameMain.btnSync"))) {
            // When send data is clicked, check for data to import
            if (!UserAccount.getImportComplete() && !oldDeviceName.equals("")) {
                ImportDatabase importDB = new ImportDatabase();
                String oldDBFile = importDB.getOldDB();
                if (!oldDBFile.equals("")) {
                    int retVal = JOptionPane.showConfirmDialog(App.getMainFrame(), App.getText("JFrameMain.message.import"), App.getName(), JOptionPane.YES_NO_OPTION);
                    if (retVal == JOptionPane.YES_OPTION) {
                        importDB.sendImportData(oldDeviceName, watch.getSleepRecord().getDeviceName(), oldDBFile);
                    }
                    UserAccount.setImportComplete(true);
                }
            }

            Date date = datePickerData.getDate();
            if (!watch.isElite2()) {
                watch.getSleepRecord().setDate(date);
            }

            final SwingWorker worker = new SwingWorker() {

                @Override
                protected Object doInBackground() throws Exception {
                    lblStatus.setText(App.getText("JFrameMain.connecting") + "...");
                    repaint();
                    try {
                        Thread.sleep(100);
                    } catch (Exception e) {
                    }
                    lblStatus.setText(App.getText("JFrameMain.uploading") + "...");
                    repaint();
                    SleepRecord currentSleepRecord = watch.getSleepRecord();
                    SleepRecord oldSleepRecord = null;
                    String retValue = "";

                    boolean successful = false;
                    while (oldSleepRecord == null || !currentSleepRecord.equals(oldSleepRecord)) {
                        retValue = WebSend.sendDataRecord(UserAccount.getEmail(watch.getSleepRecord().getDeviceName()), watch.getSleepRecord());
                        if (retValue != null) {
                            // Expecting format (Error|Success):Message
                            String[] values = retValue.split(":");                        
                            if (values.length >= 2 && values[0].contains("Error")) {
                                retValue = values[1];
                                break; // couldn't send the record, but as long as we don't go to next we are safe to try again later.
                            }
                            else {
                                retValue = values[1];
                                successful = true;
                            }
                        }
                        else {
                            break; // couldn't send the record, but as long as we don't go to next we are safe to try again later.
                        }
                                                
                        try {
                            Thread.sleep(100);
                        } catch (Exception e) {
                        }
                        if (watch.isElite2()) {
                            watch.nextFlashLog();
                            watch.readFlashLog();
                        }
                        oldSleepRecord = currentSleepRecord;
                        currentSleepRecord = watch.getSleepRecord();
                    }
                    
                    lblStatus.setText(retValue);
                    repaint();

                    if (successful) {
                        int retVal = JOptionPane.showConfirmDialog(App.getMainFrame(), App.getText("JFrameMain.viewDataNow") , App.getName(), JOptionPane.YES_NO_OPTION);
                        if (retVal == JOptionPane.YES_OPTION) {
                            WebSend.openUrl("http://my.sleeptracker.com");
                        }
                    }

                    return null;
                }
            };
            worker.execute();
        } 
        else {
            @SuppressWarnings("rawtypes")
            final SwingWorker worker = new SwingWorker() {

                @Override
                protected Object doInBackground() throws Exception {
                    readWatch();

                    return null;
                }
            };
            worker.execute();
        }
    }//GEN-LAST:event_btnSyncActionPerformed

    private void btnResetActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnResetActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnResetActionPerformed

    private void btnResetMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnResetMousePressed
        if (btnSync.getText().equals(App.getText("JFrameMain.btnSync"))) {
            String name = watch.getSleepRecord().getDeviceName();
            if (name.equals("Default")) {
                JOptionPane.showMessageDialog(App.getMainFrame(), App.getText("JFrameMain.noName"));
            }
            else {
                int result = JOptionPane.showConfirmDialog(App.getMainFrame(), App.getText("JFrameMain.deviceSet1") + " '" + name + "', " + App.getText("JFrameMain.deviceSet2"), App.getText("JFrameMain.watchResetTitle"), JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
                if (result == JOptionPane.YES_OPTION) {
                    try {
                        watch.setOpen();
                        watch.saveDeviceName("");
                        watch.setClose();
                        try {
                            Preferences prefs = Preferences.userNodeForPackage(App.class);
                            prefs.clear();
                        }
                        catch (BackingStoreException e) {

                        }
                        JOptionPane.showMessageDialog(App.getMainFrame(), App.getText("JFrameMain.eraseSuccess"));
                        System.exit(0);
                    } catch (IOException ex) {
                        JOptionPane.showMessageDialog(App.getMainFrame(), App.getText("JFrameMain.error.deleteName") + ": " + ex.getMessage(), App.getText("JFrameMain.error.deleteNameTitle"), JOptionPane.ERROR_MESSAGE);
                    }
                }
            }
        }
    }//GEN-LAST:event_btnResetMousePressed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {        
        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new JFrameMain().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnCancel;
    private javax.swing.JButton btnNo;
    private javax.swing.JButton btnReset;
    private javax.swing.JButton btnSync;
    final javax.swing.JPanel contentPanel = new javax.swing.JPanel() {
        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);

            int x = 0;
            int y = 0;
            int w = getWidth();
            int h = getHeight();
            int arcw = 35;
            int arch = 30;

            Graphics2D g2 = (Graphics2D) g.create();
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            g2.setColor(new Color(192, 215, 46));
            g2.fillRoundRect(x, y, w, h, arcw, arch);

            g2.setColor(Color.WHITE);
            g2.fillOval(-w / 2, -25, w * 2, h);

            g2.setStroke(new BasicStroke(6f));
            g2.setColor(new Color(192, 215, 46));
            g2.drawRoundRect(x, y, w, h, arcw, arch);
            g2.drawRect(x, y, w, h);

            ImageIcon image = new ImageIcon(JFrameMain.class.getResource("/com/sleeptracker/resources/STLogoSmall.png"));

            g2.drawImage(image.getImage(), 25, 15, image.getIconWidth(), image.getIconHeight(), this);

            String os = System.getProperty("os.name").toLowerCase();
            if (os.contains("window")) {
                Shape shape = new RoundRectangle2D.Float(0, 0, contentPanel.getWidth(), contentPanel.getHeight(), arcw, arch);
                AWTUtilities.setWindowShape(dialog, shape);
            }
        }
    };
    private org.jdesktop.swingx.JXDatePicker datePickerData;
    private javax.swing.JLabel lblDataDate;
    private javax.swing.JLabel lblStatus;
    private javax.swing.JLabel lblUploadNow;
    private javax.swing.JLabel lblVersion;
    // End of variables declaration//GEN-END:variables
}
